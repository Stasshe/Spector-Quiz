Firebase Firestore の使用量クォータ（quota）は、Firestore データベースで使えるリソースの上限を指します。Firestore には「無料枠」と「有料枠（従量課金）」があり、主に次の項目ごとにクォータが設定されています。

### 主なクォータ項目

1. **書き込み数（Writes）**
   - ドキュメントの作成・更新・削除操作の回数。
   - 1 書き込み = 1 ドキュメントに対する create/set/update/delete の1回。

2. **読み取り数（Reads）**
   - ドキュメントの取得操作（get, query, listen）ごとにカウント。
   - クエリで複数ドキュメントが返る場合は、その数だけ加算。
   - リアルタイムリスナーは、初回取得時と変更検知時にカウント。

3. **削除数（Deletes）**
   - ドキュメントの削除操作ごとにカウント。

4. **ストレージ容量**
   - Firestore に保存されているデータの合計サイズ（GB単位）。

5. **同時接続数**
   - クライアントが同時に接続できる数。

### 無料枠（Spark プラン）の例（2024年5月現在）

| 指標             | 無料枠（1日あたり）         |
|:-----------------|:----------------------------|
| 読み取り         | 50,000 回                   |
| 書き込み         | 20,000 回                   |
| 削除             | 20,000 回                   |
| ストレージ容量   | 1 GiB                       |
| 同時接続         | 100                         |

### クォータ計算方法の具体例

#### 1. 書き込み例
- 1 ドキュメントに対して 1 回 set() → 書き込み 1 回
- 10 ドキュメント一括 set() → 書き込み 10 回
- バッチ書き込み（batch.write）: 含まれる各操作ごとにカウント

#### 2. 読み取り例
- ドキュメント 1 件 get() → 読み取り 1 回
- クエリ（query）で 5 件返る → 読み取り 5 回
- スナップショットリスナー（onSnapshot）: 初回に全件分、以降変更分だけ加算

#### 3. 削除例
- ドキュメント 1 件 delete() → 削除 1 回

#### 4. ストレージ容量
- ドキュメント本体 + インデックス分のサイズが課金対象
- 1 ドキュメントが 1 KB、1000 件保存 → 約 1 MB
- 添付ファイル（画像等）は通常 Cloud Storage を利用

### 注意点

- ルール: 書き込み・読み取り・削除は「ドキュメント数」単位で計算され、コレクション単位ではありません。
- クエリ実行時、返るドキュメント数分だけ「読み取り」としてカウント。
- スナップショットリスナーを長時間動かすと、変更ごとに再カウントされるので注意。
- クォータ超過時は API 呼び出しがエラー（RESOURCE_EXHAUSTED）になります。

### 詳細な最新情報

公式ドキュメントの「[Firestore の料金と使用量の計算方法](https://firebase.google.com/docs/firestore/quotas?hl=ja)」や、「[料金計算ツール](https://firebase.google.com/pricing?hl=ja)」も参照してください。

---

#### まとめ

- すべての操作（読み取り・書き込み・削除）は「ドキュメント数」単位でカウント
- クエリやリスナーは返却・変更ドキュメントごとに加算
- クォータ制限に達すると操作不能。無料枠を超えたら従量課金（Blazeプラン）

ご利用状況に応じて、クォータ管理や最適化（クエリ・リスナー設計）を心がけましょう。